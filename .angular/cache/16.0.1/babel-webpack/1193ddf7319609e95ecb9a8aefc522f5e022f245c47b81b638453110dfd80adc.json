{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/data-storage.service\";\nimport * as i2 from \"./recipe.service\";\nclass RecipesResolverService {\n  constructor(ds, rs) {\n    this.ds = ds;\n    this.rs = rs;\n  }\n  resolve(route, state) {\n    //     let recipesFromHttp;\n    //         this.ds.fetchRecipes().\n    //  subscribe( (recipes)=>{\n    //       recipesFromHttp = recipes});\n    //\n    // const recipesFromService  =this.rs.getRecipes();\n    //\n    //\n    // if(recipesFromHttp == recipesFromService){\n    //     return\n    // }else{\n    //     return recipesFromService;\n    // }\n    //fetch the new recipice from the serve\n    const recipes = this.rs.getRecipes();\n    if (recipes.length === 0) {\n      return this.ds.fetchRecipes();\n      //\n    } else {\n      return recipes;\n    }\n  }\n}\nRecipesResolverService.ɵfac = function RecipesResolverService_Factory(t) {\n  return new (t || RecipesResolverService)(i0.ɵɵinject(i1.DataStorageService), i0.ɵɵinject(i2.RecipeService));\n};\nRecipesResolverService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: RecipesResolverService,\n  factory: RecipesResolverService.ɵfac,\n  providedIn: 'root'\n});\nexport { RecipesResolverService };","map":{"version":3,"names":["RecipesResolverService","constructor","ds","rs","resolve","route","state","recipes","getRecipes","length","fetchRecipes","i0","ɵɵinject","i1","DataStorageService","i2","RecipeService","factory","ɵfac","providedIn"],"sources":["C:\\Users\\jiapl\\Documents\\GitHub\\Angular\\src\\app\\recipes\\recipes-resolver.service.ts"],"sourcesContent":["import {Injectable} from \"@angular/core\";\r\nimport { ActivatedRouteSnapshot, Resolve, RouterStateSnapshot} from \"@angular/router\";\r\nimport {Recipe} from \"./recipe.model\";\r\nimport {DataStorageService} from \"../shared/data-storage.service\";\r\nimport {RecipeService} from \"./recipe.service\";\r\n\r\n\r\n@Injectable({providedIn:'root'})\r\nexport class RecipesResolverService implements Resolve<Recipe[]> {\r\n    constructor(private ds: DataStorageService,\r\n                private rs : RecipeService) {\r\n    }\r\n\r\nresolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\r\n//     let recipesFromHttp;\r\n//         this.ds.fetchRecipes().\r\n//  subscribe( (recipes)=>{\r\n//       recipesFromHttp = recipes});\r\n//\r\n// const recipesFromService  =this.rs.getRecipes();\r\n//\r\n//\r\n// if(recipesFromHttp == recipesFromService){\r\n//     return\r\n// }else{\r\n//     return recipesFromService;\r\n// }\r\n\r\n//fetch the new recipice from the serve\r\nconst recipes  = this.rs.getRecipes();\r\nif(recipes.length===0){\r\n    return this.ds.fetchRecipes()\r\n    //\r\n\r\n}else {\r\n    return recipes;\r\n}\r\n\r\n\r\n}\r\n}\r\n"],"mappings":";;;AAOA,MACaA,sBAAsB;EAC/BC,YAAoBC,EAAsB,EACtBC,EAAkB;IADlB,KAAAD,EAAE,GAAFA,EAAE;IACF,KAAAC,EAAE,GAAFA,EAAE;EACtB;EAEJC,OAAOA,CAACC,KAA6B,EAAEC,KAA0B;IACjE;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA,MAAMC,OAAO,GAAI,IAAI,CAACJ,EAAE,CAACK,UAAU,EAAE;IACrC,IAAGD,OAAO,CAACE,MAAM,KAAG,CAAC,EAAC;MAClB,OAAO,IAAI,CAACP,EAAE,CAACQ,YAAY,EAAE;MAC7B;KAEH,MAAK;MACF,OAAOH,OAAO;;EAIlB;;AA/BaP,sBAAsB,C;mBAAtBA,sBAAsB,EAAAW,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,kBAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,aAAA;AAAA;AAAtBhB,sBAAsB,C;SAAtBA,sBAAsB;EAAAiB,OAAA,EAAtBjB,sBAAsB,CAAAkB,IAAA;EAAAC,UAAA,EADX;AAAM;SACjBnB,sBAAsB"},"metadata":{},"sourceType":"module","externalDependencies":[]}