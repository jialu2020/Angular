{"ast":null,"code":"import { catchError, throwError } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nclass AuthService {\n  constructor(http) {\n    this.http = http;\n  }\n  signup(email, password) {\n    return this.http.post('https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyA4hpXtrrJa6GwJQ_c6linszg4kK4FG5T0', {\n      email: email,\n      password: password,\n      returnSecureToken: true\n    }).pipe(catchError(errRes => {\n      // catch error 捕获错误 ，并执行一些特殊的操作， 通常是显示错误或者纠正措施\n      let errorMessage = 'An unknow errer occured!';\n      console.log(errRes);\n      if (!errRes.error || !errRes.error.error) {\n        // throw error 抛出错误 告诉程序一个错误发生了\n        return throwError(() => {\n          new Error(errorMessage);\n          console.log('unknow error');\n        });\n      }\n      switch (errRes.error.error.message) {\n        case 'EMAIL_EXISTS':\n          errorMessage = 'this email exists already!';\n          console.log(errRes);\n          break;\n        case 'WEAK_PASSWORD':\n          errorMessage = 'this password is too short!';\n          break;\n        default:\n          errorMessage = 'unknow Error occured!';\n      }\n      return throwError(errorMessage);\n    }));\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});\nexport { AuthService };","map":{"version":3,"names":["catchError","throwError","AuthService","constructor","http","signup","email","password","post","returnSecureToken","pipe","errRes","errorMessage","console","log","error","Error","message","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\Users\\jiapl\\Documents\\GitHub\\Angular\\src\\app\\auth\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {catchError, throwError} from \"rxjs\";\r\n\r\n\r\ninterface AuthResponseData{\r\n  kind:string;\r\n  idToken: string;\r\n  email:string;\r\n  refreshToken:string;\r\n  expiresIn: string;\r\n  localId:string;\r\n  //response data format\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AuthService {\r\n\r\n  constructor( private http : HttpClient) { }\r\n\r\n\r\n  signup(email:string,password:string){\r\n    return  this.http.post<AuthResponseData>('https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyA4hpXtrrJa6GwJQ_c6linszg4kK4FG5T0'\r\n    ,{\r\n            email : email,\r\n            password: password ,\r\n            returnSecureToken : true}).pipe(catchError(errRes=>{\r\n                // catch error 捕获错误 ，并执行一些特殊的操作， 通常是显示错误或者纠正措施\r\n                let errorMessage = 'An unknow errer occured!';\r\n                console.log(errRes)\r\n                if(!errRes.error||!errRes.error.error){\r\n                    // throw error 抛出错误 告诉程序一个错误发生了\r\n                    return throwError(()=>{\r\n                        new Error(errorMessage);\r\n                        console.log('unknow error')\r\n                    });\r\n                }\r\n\r\n                switch (errRes.error.error.message){\r\n                    case 'EMAIL_EXISTS':\r\n                        errorMessage =  'this email exists already!';\r\n                        console.log(errRes)\r\n                        break;\r\n                    case 'WEAK_PASSWORD' :\r\n                        errorMessage = 'this password is too short!'\r\n                        break;\r\n\r\n                    default:\r\n                        errorMessage = 'unknow Error occured!'\r\n\r\n                  }\r\n             return throwError(errorMessage);\r\n    }));\r\n\r\n  }\r\n\r\n\r\n}\r\n"],"mappings":"AAEA,SAAQA,UAAU,EAAEC,UAAU,QAAO,MAAM;;;AAa3C,MAGaC,WAAW;EAEtBC,YAAqBC,IAAiB;IAAjB,KAAAA,IAAI,GAAJA,IAAI;EAAiB;EAG1CC,MAAMA,CAACC,KAAY,EAACC,QAAe;IACjC,OAAQ,IAAI,CAACH,IAAI,CAACI,IAAI,CAAmB,uGAAuG,EAC/I;MACOF,KAAK,EAAGA,KAAK;MACbC,QAAQ,EAAEA,QAAQ;MAClBE,iBAAiB,EAAG;KAAK,CAAC,CAACC,IAAI,CAACV,UAAU,CAACW,MAAM,IAAE;MAC/C;MACA,IAAIC,YAAY,GAAG,0BAA0B;MAC7CC,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC;MACnB,IAAG,CAACA,MAAM,CAACI,KAAK,IAAE,CAACJ,MAAM,CAACI,KAAK,CAACA,KAAK,EAAC;QAClC;QACA,OAAOd,UAAU,CAAC,MAAI;UAClB,IAAIe,KAAK,CAACJ,YAAY,CAAC;UACvBC,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;QAC/B,CAAC,CAAC;;MAGN,QAAQH,MAAM,CAACI,KAAK,CAACA,KAAK,CAACE,OAAO;QAC9B,KAAK,cAAc;UACfL,YAAY,GAAI,4BAA4B;UAC5CC,OAAO,CAACC,GAAG,CAACH,MAAM,CAAC;UACnB;QACJ,KAAK,eAAe;UAChBC,YAAY,GAAG,6BAA6B;UAC5C;QAEJ;UACIA,YAAY,GAAG,uBAAuB;MAAA;MAGjD,OAAOX,UAAU,CAACW,YAAY,CAAC;IACxC,CAAC,CAAC,CAAC;EAEL;;AAtCWV,WAAW,C;mBAAXA,WAAW,EAAAgB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;AAAA;AAAXnB,WAAW,C;SAAXA,WAAW;EAAAoB,OAAA,EAAXpB,WAAW,CAAAqB,IAAA;EAAAC,UAAA,EAFV;AAAM;SAEPtB,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}